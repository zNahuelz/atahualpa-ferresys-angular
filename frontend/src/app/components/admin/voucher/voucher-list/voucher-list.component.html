@if (loading) {
  <div class="container d-flex align-items-center justify-content-center mt-5 pt-5">
    <mat-spinner></mat-spinner>
  </div>
  <div class="container d-flex align-items-center justify-content-center mt-5 pt-5">
    <h3 class="fw-light">Cargando comprobantes de pago...</h3>
  </div>
} @else {
  <div class="container mt-4">
    <div class="mt-1">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table-bordered" matSort>
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>ID</th>
          <td mat-cell *matCellDef="let v"> {{ v.id }}</td>
        </ng-container>

        <ng-container matColumnDef="customer_data">
          <th mat-header-cell *matHeaderCellDef>CLIENTE</th>
          <td mat-cell *matCellDef="let v"> {{ v.customer!!.name }} {{ v.customer!!.surname }}</td>
        </ng-container>

        <ng-container matColumnDef="voucher_type">
          <th mat-header-cell *matHeaderCellDef>TIPO COMP.</th>
          <td mat-cell *matCellDef="let v"
              [ngClass]="{'text-success': v.voucher_type.name == 'BOLETA', 'text-danger': v.voucher_type.name == 'FACTURA'}"
              class="fw-bold border-black">{{ v.voucher_type.name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="subtotal">
          <th mat-header-cell *matHeaderCellDef class="text-end">SUBTOTAL</th>
          <td mat-cell *matCellDef="let v" class="text-end">{{ v.subtotal }}</td>
        </ng-container>

        <ng-container matColumnDef="igv">
          <th mat-header-cell *matHeaderCellDef class="text-end">IGV</th>
          <td mat-cell *matCellDef="let v" class="text-end">{{ v.igv }}</td>
        </ng-container>

        <ng-container matColumnDef="total">
          <th mat-header-cell *matHeaderCellDef class="text-end">TOTAL</th>
          <td mat-cell *matCellDef="let v" class="text-end">{{ v.total }}</td>
        </ng-container>

        <ng-container matColumnDef="paid">
          <th mat-header-cell *matHeaderCellDef class="text-center">ESTADO</th>
          <td mat-cell *matCellDef="let v" class="text-center border-dark fw-bold"
              [ngClass]="{'text-success': v.paid, 'text-danger': !v.paid}">
            @if (v.paid) {
              PAGADO
            } @else {
              PENDIENTE
            }
          </td>
        </ng-container>

        <ng-container matColumnDef="toolbox">
          <th mat-header-cell *matHeaderCellDef class="text-dark fw-bold"></th>
          <td mat-cell *matCellDef="let v">
            <ng-container>
              <div class="text-center">
                <div class="btn-group btn-group-sm" role="group">
                  <button type="button" class="btn btn-info bg-gradient btn-sm"><i
                    class="bi bi-info-square" routerLink="/d/voucher/{{v.id}}"></i></button>
                </div>
              </div>
            </ng-container>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <div class="row mt-3" [hidden]="hidePagination">
        <div class="col text-end">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-primary bg-gradient" (click)="prevPage(paginationType)"
                    [disabled]="isFirstPage()">
              <mat-icon>arrow_back</mat-icon>
            </button>
            <button type="button" class="btn btn-primary bg-gradient">
              PÃ¡gina {{ currentPage }} de {{ lastPage }}
            </button>
            <button type="button" class="btn btn-primary bg-gradient" (click)="nextPage(paginationType)"
                    [disabled]="isLastPage()">
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
}
